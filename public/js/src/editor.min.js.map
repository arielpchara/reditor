{"version":3,"sources":["editor.min.js"],"names":["$","socket","io","location","host","savecode","editor","emit","filepath","content","getValue","textarea","CodeMirror","modeURL","fromTextArea","lineNumbers","matchBrackets","autoCloseBrackets","autoCloseTags","extraKeys","Ctrl-S","theme","on","data","setOption","console","log","mimetype","info","findModeByMIME","autoLoadMode","mode","window","bind","confirm","jQuery"],"mappings":"CAAA,SAAWA,GAEP,GAAIC,GAASC,GAAG,UAAUC,SAASC,MAG/BC,EAAW,SAAUC,GACrBL,EAAOM,KAAK,SACJC,SAAUA,SACVC,QAASH,EAAOI,cAIxBC,EAAWX,EAAE,YAAY,EAC7B,IAAIW,EAAU,CACVC,WAAWC,QAAU,+BACrB,IAAIP,GAASM,WAAWE,aAAaH,GACjCI,aAAa,EACbC,eAAe,EACfC,mBAAmB,EAEnBC,eAAe,EACfC,WACIC,SAAUf,GAEdgB,MAAO,YAIfrB,EAAE,WACOQ,WACDP,EAAOqB,GAAG,OAAQ,SAAUC,GAG1B,GAFAjB,EAAOkB,UAAU,QAASD,EAAKd,SAC/BgB,QAAQC,IAAIH,GACRA,EAAKI,SAAU,CACjBrB,EAAOkB,UAAU,OAAQD,EAAKI,SAC9B,IAAIC,GAAOhB,WAAWiB,eAAeN,EAAKI,SAC1Cf,YAAWkB,aAAaxB,EAAQsB,EAAKG,SAGzC9B,EAAOM,KAAK,QAAQC,SAASA,WAC7BF,EAAOgB,GAAG,SAAUjB,IAGxBL,EAAEgC,QAAQC,KAAK,eAAe,WACxBC,QAAQ,uCACVjC,EAAOM,KAAK,aAIrB4B","file":"editor.min.js","sourcesContent":["(function ($) {\n\n    var socket = io('http://'+location.host);\n\n\n    var savecode = function (editor) {\n        socket.emit('write', {\n                filepath: filepath,\n                content: editor.getValue()\n            });\n    };\n\n    var textarea = $('textarea')[0];\n    if( textarea ){\n        CodeMirror.modeURL = \"/lib/CodeMirror/mode/%N/%N.js\";\n        var editor = CodeMirror.fromTextArea(textarea, {\n            lineNumbers: true,\n            matchBrackets: true,\n            autoCloseBrackets: true,\n            // matchTags: true,\n            autoCloseTags: true,\n            extraKeys: {\n                'Ctrl-S': savecode\n            },\n            theme: 'dracula'\n        });\n    }\n\n    $(function() {\n        if ( filepath ) {\n            socket.on('file', function (data) {\n              editor.setOption(\"value\", data.content);\n              console.log(data);\n              if( data.mimetype ){\n                editor.setOption(\"mode\", data.mimetype);\n                var info = CodeMirror.findModeByMIME(data.mimetype);\n                CodeMirror.autoLoadMode(editor, info.mode);\n              }\n            });\n            socket.emit('file',{filepath:filepath});\n            editor.on('change', savecode);\n        }\n\n        $(window).bind(\"beforeunload\",function() {\n          if( confirm(\"Proccess on the server will close!\") ){\n            socket.emit('exit');\n          }\n        });\n    });\n})(jQuery);\n"],"sourceRoot":"/source/"}